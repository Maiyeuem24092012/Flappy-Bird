<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Flappy Bird Engine</title>
    <style>
        body { margin: 0; background: #222; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { border: 4px solid #fff; background-color: #70c5ce; }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="288" height="512"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// --- ĐỊNH NGHĨA ĐƯỜNG DẪN TỪ GITHUB CỦA BẠN ---
const BASE_URL = "assets/";

const assets = {
    bg: new Image(), bird: new Image(), base: new Image(), pipe: new Image(),
    wingSnd: new Audio(BASE_URL + "audio/wing.ogg"),
    hitSnd: new Audio(BASE_URL + "audio/hit.ogg")
};

assets.bg.src = BASE_URL + "images/background-day.png";
assets.bird.src = BASE_URL + "images/yellowbird-midflap.png";
assets.base.src = BASE_URL + "images/base.png";
assets.pipe.src = BASE_URL + "images/pipe-green.png";

let birdY = 250, v = 0, alive = true;

function run() {
    ctx.drawImage(assets.bg, 0, 0);
    
    if (alive) {
        v += 0.25; // Trọng lực từ main.cpp
        birdY += v;
    }

    ctx.drawImage(assets.bird, 50, birdY, 34, 24);
    ctx.drawImage(assets.base, 0, 400, 288, 112);

    if (birdY >= 400 && alive) {
        alive = false;
        assets.hitSnd.play();
    }
    requestAnimationFrame(run);
}

window.onclick = () => {
    if(alive) { v = -5; assets.wingSnd.play(); }
    else { location.reload(); }
};

run();
</script>
</body>
</html>
